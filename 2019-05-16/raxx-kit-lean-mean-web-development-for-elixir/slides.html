<!DOCTYPE html>
<html>
  <head>
    <title>Raxx.Kit lean mean web development</title>
    <meta charset="utf-8">
    <style>
      @import url('https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500');

      body {
        font-family: 'Montserrat';
        font-weight: 400;
      }
      h1 {
        font-weight: 200;
      }
      h2, h3 {
        font-weight: 300;
      }
      h1 {
        border-bottom: #b3eae2 3px solid;
      }

      strong {
        font-weight: 500;
        color: #01a38a;
      }

      em {
        color: #999;
      }

      img {
        width: 100%;
      }

      blockquote {
        /*background: #d3e8fb;*/
        background: #F9F9F9;
        margin: 0;
        border: gray 1px solid;
        padding: 20px 40px;
      }

      img {
        max-width: 100%;
      }

      @page {
        size: 1024px 768px;
        margin: 0;
      }

      @media print {
        .remark-slide-scaler {
          width: 100% !important;
          height: 100% !important;
          transform: scale(1) !important;
          top: 0 !important;
          left: 0 !important;
        }
      }
    </style>
  </head>
  <body>
    <textarea id="source">

class: middle

# Raxx.Kit
## Lean mean web development

[crowdhailer.me](https://crowdhailer.me)

---

class: middle

## **Hi**

### *name -* Peter Saxton

### *@internets -* CrowdHailer

### *@works -* `nil`

---

class: middle

![](/images/pebble-1.jpg)

---

class: middle

# Demo
## From the beginning

---

class: middle

```bash
mix archive.install hex raxx_kit

mix raxx.new my_app
```


---

class: middle

```elixir
defp deps do
  [
    {:ace, "~> 0.18.6"},
    {:raxx_logger, "~> 0.2.2"},
    {:raxx_view, "~> 0.1.7"},
    {:raxx_static, "~> 0.8.3"},
    {:raxx_session, "~> 0.2.0"},
    {:jason, "~> 1.0"},
    {:exsync, "~> 0.2.3", only: :dev},
    # ...
  ]
end
```
*mix.exs*
---

class: middle

# What is Raxx?

---

class: middle

# Raxx is stable

#### Focused **API**

```elixir
{:raxx, "~> 1.0"}
```

#### **Production** ready

in production since 2017

---

class: middle

### Interface

**Raxx**
```elixir
defmodule MyApp do
  use Raxx.SimpleServer

  def handle_request(_request, _state) do
    %Raxx.Response{status: 200, headers: [], body: false}
  end
end
```

**OTP**

```elixir
defmodule MyServer do
  use GenServer

  def handle_call(:request, _from, state) do
    {:reply, :response, state}
  end
end
```

[see previous](foo)

---

class: middle

### Interface (streaming)

```elixir
defmodule Upload do
  use Raxx.Server # ! Raxx.SimpleServer

  def handle_head(%{path: ["upload"] body: true}, _) do
    {:ok, io_device} = File.open("my/path")
    {[], {:file, device}}
  end

  def handle_data(data, state = {:file, device}) do
    IO.write(device, data)
    {[], state}
  end

  def handle_tail(_trailers, state) do
    response(:see_other)
    |> set_header("location", "/")
  end
end
```

---

class: middle

### Toolkit

```elixir
defmodule Greetings do
  use Raxx.SimpleServer

  def handle_request(request, _state) do
    query = get_query(request)

    response(:ok)
    |> set_header("content-type", "text/plain")
    |> set_body("Hello, World!")
  end
end
```

---

class: middle

### Ecosystem

```elixir
defmodule Greetings do
  use Raxx.SimpleServer

  alias Raxx.Session

  use Raxx.View,
    arguments: [:user],
    template: "path/to/greetings_template.html.eex"

  def handle_request(request, %{session_config: conf}) do
    {:ok, session} = Session.extract(request, conf)

    response(:ok)
    |> render(session.user)
  end
end
```

---
class: middle

## More on the ecosystem

- Ace etc etc

---
class: middle

# What is Raxx.Kit?

---

class: middle

```sh
mix raxx.new my_app
  --node-assets
  --ecto
  --docker
  --api
```

---

class: middle

Stack on top of Ace

---

class: middle

Raxx.Kit is not a framework
---

class: middle

- project structure
- live reloading
- templates
- static assets
- docker integration (`--docker`)
- compiled assets (`--node-assets`)
- database setup (`--ecto`)

???
Keep this we can look at things two ways

---

class: middle

### **Capability**
the power or ability to do something.

### **Convenience**
the state of being able to proceed with something without difficulty

### **Convention**
a way in which something is usually done

behaviour that is considered acceptable or polite to most members of a society

---

class: middle

## OK/back it up/Pebble
---

class: middle

## **Capability**

#### the power or ability to do something

???

 Ace

HTTP/1
HTTP/2

server

---

class: middle

## **Convenience**

#### the state of being able to proceed with something without difficulty

???
useful without the generators

---

class: middle

## **Convention**

#### behaviour that is considered acceptable or polite to most members of a society

---

class: middle

## Isolate infrastructure concerns
## The Web is not your business consern
## Protect the model from infrastructure concerns
## Web is just one interface

Are there two things here. keeping web from model and keeping www from api?


## **M**ind your own business **V**iew **C**ontroller (**?VC**)

---

class: middle

![](/2018-08-16/mind-your-own-business-view-controller/hexagonal-architecture.png)

---
Namespaces WWW (Not Web)
Two different interfaces



Mind your own business

A good separation of concerns is when an interface is everything the web layer needs to know about the application.
The store could be in memory or a database and the web layer wouldn't need to chan

Support all the data bases

---

class: middle

# functional cohesion


Maybe look at the forum post that was all about this

```sh
my_app/
├── www/
    ├── actions/
        ├── login.ex/
        ├── login.html.eex/
```
---

class: middle

```elixir
defmodule MyApp.WWW.Login do
  use Raxx.SimpleServer
  use Raxx.View, arguments: []

  def handle_request(%{method: :GET}, _state) do
    response(:ok)
    |> render()
  end

  def handle_request(request = %{method: :POST}, _state) do
    # ...
  end
end
```

---

class: middle

OTP is my application

- startup with Ace

---

class: middle

### npm for asset compilation

JavaScript ecosystem better for this
node-sass
there is no elixir-sass

---

class: middle

docker, currently mix run but we shall have to look into releases.

---

class: middle

## Opt in to conventions

Phoenix vs Raxx.Kit
--ecto vs --no-ecto

---

class: middle

The Raxx ecosystem is a powerful, focused and extensible toolkit for web development.
By providing tools focused just on the web layer, it is flexible enough to be used in any kind of application.

Raxx.Kit boosts getting started with Raxx.
It does this by introducing conventions for project structure, asset management, deployment, testing and more.

---
class: middle
Now Raxx has reached 1.0, development is focused on the ecosystem.
One area of focus is bolstering and expanding the conventions in Raxx.Kit that are most useful to developers.

---
class: middle

# Future plans

---

class: middle

Section on undecided conventions
- Forms
- Error handling (error handling conventions will almost never work for streaming)

---

class: middle

Capability QUIC

favourite issue

---

class: middle

Absinth integration
Already possible - make some convention
Because it's opt in should be much easier to do because there are very few assumptions you will be doing it some otherway

EventSouring

Texas/Drab integration
GenBrowser

API conventions?
    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
  </body>
</html>
